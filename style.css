/* ============================================================
   clipguard â€” clean security-instrument aesthetic
   IBM Plex Sans (UI) + IBM Plex Mono (data/code)
   Dark slate base, amber accent, clinical precision
   ============================================================ */

/* ---- Tokens ---- */

:root {
	--bg:			#0e1117;
	--bg-card:		#161b22;
	--bg-inset:		#0d1117;
	--bg-head:		#131920;
	--bg-hover:		#1c2333;

	--border:		#21262d;
	--border-soft:		#1b2028;
	--border-accent:	#e3a032;

	--text:			#c9d1d9;
	--text-muted:		#8b949e;
	--text-dim:		#6e7681;
	--text-faint:		#30363d;
	--text-title:		#ecf2f8;

	--accent:		#e3a032;
	--accent-soft:		rgba(227, 160, 50, 0.12);
	--accent-glow:		rgba(227, 160, 50, 0.06);

	--green:		#3fb950;
	--green-bg:		rgba(63, 185, 80, 0.08);
	--green-bdr:		rgba(63, 185, 80, 0.25);

	--red:			#f85149;
	--red-bg:		rgba(248, 81, 73, 0.08);
	--red-bdr:		rgba(248, 81, 73, 0.25);

	--yellow:		#d29922;
	--yellow-bg:		rgba(210, 153, 34, 0.08);
	--yellow-bdr:		rgba(210, 153, 34, 0.25);

	--badge-work-bg:	rgba(63, 185, 80, 0.1);
	--badge-work-bdr:	rgba(63, 185, 80, 0.3);
	--badge-priv-bg:	rgba(248, 81, 73, 0.1);
	--badge-priv-bdr:	rgba(248, 81, 73, 0.3);

	--overlay:		rgba(1, 4, 9, 0.8);

	/* syntax */
	--kw:			#ff7b72;
	--fn:			#d2a8ff;
	--str:			#a5d6ff;
	--num:			#79c0ff;
	--cmt:			#484f58;
	--op:			#ff7b72;

	--input-bg:		#0d1117;
	--input-bdr:		#30363d;

	--radius:		6px;
	--radius-lg:		10px;

	--font-ui:		'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
	--font-mono:		'IBM Plex Mono', 'SF Mono', 'Cascadia Code', monospace;
}

@media (prefers-color-scheme: light) {
	:root {
		--bg:			#f6f8fa;
		--bg-card:		#ffffff;
		--bg-inset:		#f0f3f6;
		--bg-head:		#f6f8fa;
		--bg-hover:		#eef1f5;

		--border:		#d0d7de;
		--border-soft:		#e1e4e8;
		--border-accent:	#c27b15;

		--text:			#24292f;
		--text-muted:		#57606a;
		--text-dim:		#6e7781;
		--text-faint:		#afb8c1;
		--text-title:		#1b1f24;

		--accent:		#c27b15;
		--accent-soft:		rgba(194, 123, 21, 0.08);
		--accent-glow:		rgba(194, 123, 21, 0.04);

		--green:		#1a7f37;
		--green-bg:		rgba(26, 127, 55, 0.06);
		--green-bdr:		rgba(26, 127, 55, 0.2);

		--red:			#cf222e;
		--red-bg:		rgba(207, 34, 46, 0.06);
		--red-bdr:		rgba(207, 34, 46, 0.2);

		--yellow:		#9a6700;
		--yellow-bg:		rgba(154, 103, 0, 0.06);
		--yellow-bdr:		rgba(154, 103, 0, 0.2);

		--badge-work-bg:	rgba(26, 127, 55, 0.08);
		--badge-work-bdr:	rgba(26, 127, 55, 0.25);
		--badge-priv-bg:	rgba(207, 34, 46, 0.08);
		--badge-priv-bdr:	rgba(207, 34, 46, 0.25);

		--overlay:		rgba(27, 31, 36, 0.5);

		--kw:			#cf222e;
		--fn:			#8250df;
		--str:			#0550ae;
		--num:			#0550ae;
		--cmt:			#6e7781;
		--op:			#cf222e;

		--input-bg:		#f6f8fa;
		--input-bdr:		#d0d7de;
	}
}

/* ---- Reset ---- */

*		{ box-sizing: border-box; margin: 0; padding: 0; }

body {
	font-family: var(--font-ui);
	background: var(--bg);
	color: var(--text);
	min-height: 100vh;
	padding: 40px 24px;
	line-height: 1.55;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

.container {
	max-width: 980px;
	margin: 0 auto;
	animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
	from { opacity: 0; transform: translateY(8px); }
	to   { opacity: 1; transform: translateY(0); }
}

/* ---- Header ---- */

.header {
	padding-bottom: 20px;
	margin-bottom: 32px;
	border-bottom: 1px solid var(--border);
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.header-brand {
	display: flex;
	align-items: center;
	gap: 10px;
}

.brand-icon {
	color: var(--accent);
	display: flex;
	align-items: center;
}

.header h1 {
	font-size: 0.9rem;
	font-weight: 400;
	color: var(--text-muted);
	letter-spacing: -0.01em;
}

.header h1 span:first-child {
	color: var(--text-title);
	font-weight: 600;
}

.header h1 .sep {
	color: var(--text-faint);
	margin: 0 1px;
}

.header-btns {
	display: flex;
	gap: 8px;
}

.btn {
	background: var(--bg-card);
	border: 1px solid var(--border);
	color: var(--text-muted);
	font-family: var(--font-ui);
	font-size: 0.75rem;
	font-weight: 500;
	padding: 6px 14px;
	border-radius: var(--radius);
	cursor: pointer;
	letter-spacing: 0;
	transition: all 0.15s ease;
}

.btn:hover {
	border-color: var(--text-dim);
	color: var(--text);
	background: var(--bg-hover);
}

.btn-primary {
	background: var(--accent);
	border-color: var(--accent);
	color: #000;
	font-weight: 600;
}

.btn-primary:hover {
	opacity: 0.9;
	border-color: var(--accent);
	color: #000;
}

/* ---- Sections ---- */

.section		{ margin-bottom: 28px; }

.section-label {
	font-size: 0.7rem;
	font-weight: 600;
	color: var(--text-dim);
	text-transform: uppercase;
	letter-spacing: 0.08em;
	margin-bottom: 10px;
}

/* ---- Workspaces ---- */

.workspaces {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 16px;
}

.workspace {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: var(--radius-lg);
	overflow: hidden;
	transition: border-color 0.2s ease;
}

.workspace:focus-within {
	border-color: var(--accent);
	box-shadow: 0 0 0 1px var(--accent-soft);
}

.workspace-head {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 10px 16px;
	border-bottom: 1px solid var(--border);
	background: var(--bg-head);
}

.workspace-head h2 {
	font-size: 0.8rem;
	font-weight: 500;
	color: var(--text-muted);
}

.badge {
	font-family: var(--font-mono);
	font-size: 0.6rem;
	font-weight: 600;
	padding: 2px 8px;
	border-radius: 4px;
	letter-spacing: 0.04em;
}

.badge-work {
	background: var(--badge-work-bg);
	color: var(--green);
	border: 1px solid var(--badge-work-bdr);
}

.badge-private {
	background: var(--badge-priv-bg);
	color: var(--red);
	border: 1px solid var(--badge-priv-bdr);
}

textarea {
	width: 100%;
	height: 170px;
	background: transparent;
	color: var(--text);
	border: none;
	padding: 16px;
	font-family: var(--font-mono);
	font-size: 0.82rem;
	resize: vertical;
	line-height: 1.65;
}

textarea:focus		{ outline: none; }
textarea::placeholder	{ color: var(--text-faint); }

/* ---- Decision output ---- */

.output {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: var(--radius-lg);
	padding: 20px;
}

.decision {
	padding: 12px 16px;
	border-radius: var(--radius);
	font-size: 0.82rem;
	font-weight: 600;
	display: none;
	margin-bottom: 16px;
	font-family: var(--font-mono);
	letter-spacing: -0.01em;
}

.decision.blocked {
	background: var(--red-bg);
	border: 1px solid var(--red-bdr);
	color: var(--red);
	display: block;
}

.decision.allowed {
	background: var(--green-bg);
	border: 1px solid var(--green-bdr);
	color: var(--green);
	display: block;
}

.decision.waiting {
	background: var(--yellow-bg);
	border: 1px solid var(--yellow-bdr);
	color: var(--yellow);
	display: block;
}

.meters {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	gap: 12px;
	margin-bottom: 12px;
}

.meter {
	background: var(--bg-inset);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius);
	padding: 12px 14px;
}

.meter .label {
	font-size: 0.65rem;
	font-weight: 500;
	color: var(--text-dim);
	text-transform: uppercase;
	letter-spacing: 0.05em;
	margin-bottom: 6px;
}

.meter .value {
	font-family: var(--font-mono);
	font-size: 1.15rem;
	font-weight: 600;
	color: var(--text-title);
}

.bar {
	height: 3px;
	background: var(--border-soft);
	border-radius: 3px;
	margin-top: 8px;
	overflow: hidden;
}

.bar-fill {
	height: 100%;
	border-radius: 3px;
	transition: width 0.4s ease;
}

.bar-fill.red		{ background: var(--red); }
.bar-fill.green		{ background: var(--green); }
.bar-fill.yellow	{ background: var(--yellow); }

.reason-row {
	background: var(--bg-inset);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius);
	padding: 12px 14px;
}

.reason-row .label {
	font-size: 0.65rem;
	font-weight: 500;
	color: var(--text-dim);
	text-transform: uppercase;
	letter-spacing: 0.05em;
	margin-bottom: 4px;
}

.reason-row .value {
	font-family: var(--font-mono);
	font-size: 0.78rem;
	color: var(--text-muted);
}

/* ---- Footer ---- */

.footer {
	margin-top: 28px;
	padding-top: 20px;
	border-top: 1px solid var(--border);
	display: flex;
	justify-content: space-between;
	align-items: center;
	font-size: 0.72rem;
	color: var(--text-dim);
}

.footer-privacy {
	display: flex;
	align-items: center;
}

.footer span	{ color: var(--text-dim); }

/* ---- Modal ---- */

.modal-overlay {
	display: none;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: var(--overlay);
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
	z-index: 100;
	justify-content: center;
	align-items: flex-start;
	padding: 48px 24px;
	overflow-y: auto;
}

.modal-overlay.open {
	display: flex;
	animation: overlayIn 0.2s ease-out;
}

@keyframes overlayIn {
	from { opacity: 0; }
	to   { opacity: 1; }
}

.modal {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: var(--radius-lg);
	width: 100%;
	max-width: 840px;
	animation: modalIn 0.25s ease-out;
	box-shadow: 0 24px 48px rgba(0, 0, 0, 0.3);
}

@keyframes modalIn {
	from { opacity: 0; transform: translateY(12px) scale(0.98); }
	to   { opacity: 1; transform: translateY(0) scale(1); }
}

.modal-head {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 24px;
	border-bottom: 1px solid var(--border);
	background: var(--bg-head);
	border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.modal-head h2 {
	font-size: 0.82rem;
	font-weight: 600;
	color: var(--text-title);
	letter-spacing: -0.01em;
}

.btn-close {
	background: none;
	border: 1px solid var(--border);
	color: var(--text-dim);
	font-family: var(--font-mono);
	font-size: 0.7rem;
	padding: 4px 10px;
	border-radius: var(--radius);
	cursor: pointer;
	transition: all 0.15s ease;
}

.btn-close:hover {
	border-color: var(--red-bdr);
	color: var(--red);
	background: var(--red-bg);
}

.modal-body		{ padding: 28px; }

.modal-section		{ margin-bottom: 32px; }
.modal-section:last-child	{ margin-bottom: 0; }

.modal-section-label {
	font-size: 0.68rem;
	font-weight: 600;
	color: var(--text-dim);
	text-transform: uppercase;
	letter-spacing: 0.08em;
	margin-bottom: 16px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--border-soft);
}

/* ---- Pipeline diagram ---- */

.pipe-flow {
	display: flex;
	align-items: stretch;
	gap: 0;
}

.pipe-stage {
	flex: 1;
	padding: 14px 16px;
	background: var(--bg-inset);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius);
}

.pipe-stage .num {
	font-family: var(--font-mono);
	font-size: 0.6rem;
	font-weight: 600;
	color: var(--accent);
	margin-bottom: 6px;
	letter-spacing: 0.04em;
}

.pipe-stage .name {
	font-size: 0.78rem;
	color: var(--text-title);
	font-weight: 600;
	margin-bottom: 4px;
}

.pipe-stage .desc {
	font-size: 0.68rem;
	color: var(--text-dim);
	line-height: 1.45;
}

.pipe-stage .threshold {
	font-family: var(--font-mono);
	font-size: 0.65rem;
	color: var(--accent);
	margin-top: 6px;
}

.pipe-arrow {
	display: flex;
	align-items: center;
	padding: 0 8px;
	color: var(--text-faint);
	font-size: 0.8rem;
}

.pipe-result {
	display: flex;
	gap: 10px;
	margin-top: 14px;
	padding-top: 14px;
	border-top: 1px solid var(--border-soft);
}

.pipe-outcome {
	flex: 1;
	padding: 10px 14px;
	border-radius: var(--radius);
	font-size: 0.72rem;
	font-weight: 500;
}

.pipe-outcome.pass {
	background: var(--green-bg);
	color: var(--green);
	border: 1px solid var(--green-bdr);
}

.pipe-outcome.fail {
	background: var(--red-bg);
	color: var(--red);
	border: 1px solid var(--red-bdr);
}

/* ---- Pseudocode ---- */

.pseudo-block {
	font-family: var(--font-mono);
	font-size: 0.78rem;
	line-height: 1.85;
	color: var(--text-muted);
	background: var(--bg-inset);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius);
	padding: 20px 24px;
}

.pseudo-block .kw	{ color: var(--kw); }
.pseudo-block .fn	{ color: var(--fn); }
.pseudo-block .str	{ color: var(--str); }
.pseudo-block .num	{ color: var(--num); }
.pseudo-block .cmt	{ color: var(--cmt); font-style: italic; }
.pseudo-block .op	{ color: var(--op); }

.indent1	{ padding-left: 2em; }

/* ---- Rationale list ---- */

.rationale {
	font-size: 0.82rem;
	line-height: 1.7;
	color: var(--text-muted);
}

.rationale h3 {
	font-size: 0.78rem;
	color: var(--text-title);
	font-weight: 600;
	margin-top: 20px;
	margin-bottom: 8px;
}

.rationale h3:first-child	{ margin-top: 0; }

.rationale ul {
	padding-left: 1.5em;
	margin-bottom: 6px;
}

.rationale li {
	margin-bottom: 5px;
}

.rationale .highlight {
	font-family: var(--font-mono);
	font-size: 0.76rem;
	color: var(--accent);
	font-weight: 500;
	background: var(--accent-soft);
	padding: 1px 5px;
	border-radius: 3px;
}

.rationale .dim		{ color: var(--text-dim); }

/* ---- Config form ---- */

.cfg-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 12px;
}

.cfg-field {
	background: var(--bg-inset);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius);
	padding: 14px 16px;
	transition: border-color 0.15s ease;
}

.cfg-field:focus-within {
	border-color: var(--accent);
}

.cfg-field label {
	display: block;
	font-size: 0.68rem;
	font-weight: 500;
	color: var(--text-dim);
	text-transform: uppercase;
	letter-spacing: 0.04em;
	margin-bottom: 8px;
}

.cfg-field input {
	width: 100%;
	background: var(--input-bg);
	border: 1px solid var(--input-bdr);
	border-radius: 4px;
	padding: 8px 10px;
	font-family: var(--font-mono);
	font-size: 0.82rem;
	color: var(--text-title);
	transition: border-color 0.15s ease;
}

.cfg-field input:focus {
	outline: none;
	border-color: var(--accent);
	box-shadow: 0 0 0 1px var(--accent-soft);
}

.cfg-field .hint {
	font-size: 0.65rem;
	color: var(--text-dim);
	margin-top: 6px;
}

.cfg-actions {
	display: flex;
	gap: 8px;
	margin-top: 20px;
	justify-content: flex-end;
}

/* ---- Responsive ---- */

@media (max-width: 700px) {
	.workspaces		{ grid-template-columns: 1fr; }
	.meters			{ grid-template-columns: repeat(2, 1fr); }
	.cfg-grid		{ grid-template-columns: 1fr; }
	.pipe-flow		{ flex-direction: column; gap: 8px; }
	.pipe-arrow		{ transform: rotate(90deg); padding: 4px 0; justify-content: center; }
	.header			{ flex-direction: column; gap: 12px; align-items: flex-start; }
}
